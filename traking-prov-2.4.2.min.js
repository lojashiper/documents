const shadow=document.querySelector("#rastreio-yampi").attachShadow({mode:"open"}),styleNode=document.createElement("style");styleNode.textContent=".input-group-raspi{position:relative;display:flex;flex-wrap:wrap;align-items:stretch;width:100%}.form-control-raspi{display:block;text-transform: uppercase;padding:.8125rem 1.25rem;font-size:1.0625rem!important;line-height:initial;color:#161c2d;background-color:#fff;background-clip:padding-box;border:1px solid #f1f4f8!important;border-radius:.375rem!important;border-top-right-radius:0!important;border-bottom-right-radius:0!important;box-shadow:none;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;position:relative;flex:1 1 auto;width:1%!important;height:auto;margin-bottom:0}.form-control-raspi:focus{color:#161c2d;background-color:#fff;border-color:#a7b9f6;outline:0}.form-control-raspi.is-invalid{border-color:#df4759!important;border-right-color:transparent!important;box-shadow:0 0 0 0 rgb(223 71 89 / 25%);outline:0}.input-group-button-raspi{position:inherit}.button-raspi{background-color:#0046be;color:#fff;box-shadow:none;display:inline-block;cursor:pointer;font-weight:600;border:1px solid transparent;padding:.8125rem 1.25rem;font-size:1.0625rem;line-height:1.6;border-radius:.375rem;border-top-left-radius:0;border-bottom-left-radius:0;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.button-raspi-text{color:#fff;transition:all .2s}.button-raspi.button-loading .button-raspi-text{visibility:hidden;opacity:0}.button-raspi.button-loading::after{content:'';position:absolute;width:16px;height:16px;top:0;left:0;right:0;bottom:0;margin:auto;border:3px solid transparent;border-top-color:#fff;border-radius:50%;animation:button-loading-spinner 1s ease infinite}@keyframes button-loading-spinner{from{transform:rotate(0turn)}to{transform:rotate(1turn)}}#rastreio-yampi{display:flex;justify-content:center}#rastreio-yampi .container-traking{position:relative;width:100%;max-width:600px}#rastreio-yampi .container-traking .title-h1-text{margin-block-start:0.67em!important;margin-block-end:0.67em!important;margin-inline-start:0!important;margin-inline-end:0!important;font-size:2.6875rem!important;font-weight:400;line-height:1.2;text-align:center;color:#0046be}#rastreio-yampi .container-traking .title-h3-text{margin-block-start:1em!important;margin-block-end:1em!important;margin-inline-start:0!important;margin-inline-end:0!important;font-size:1.3125rem!important;font-weight:400;line-height:1.2;text-align:center}#rastreio-yampi .container-traking .badge-code-check{padding:.7em 1.15em;border-radius:10rem;color:#fff;background-color:#0046be;display:inline-block;letter-spacing:-.01em;font-size:75%;font-weight:600;line-height:1;text-align:center;white-space:nowrap;vertical-align:baseline;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}#rastreio-yampi .container-traking .badge-code-check ::after{content:url(//cdn.jsdelivr.net/gh/lojashiper/documents/check.svg);display:inline-block;width:14px;height:14px;position:relative;top:1px;left:3px;filter:invert(100%)}#rastreio-yampi .container-traking .badge-code-warning ::after{content:url(//cdn.jsdelivr.net/gh/lojashiper/documents/exclamation-triangle.svg);display:inline-block;width:14px;height:14px;position:relative;top:1px;left:3px;filter:invert(100%)}#rastreio-yampi .container-traking .alert-message{padding:18px;font-size:1.05rem;background-color:#21252f;border-color:#21252e;color:#fff;position:relative;margin-bottom:1rem;border:1px solid transparent;border-radius:.375rem}#rastreio-yampi .container-traking .alert-warning-message{padding:18px;font-size:17px;color:#2b354f;background-color:#fad776;border-color:#fad776;position:relative;margin-bottom:1rem;border:1px solid transparent;border-radius:.375rem}#rastreio-yampi .timeline-container #timeline{position:relative;display:table;height:100%;margin-left:auto;margin-right:auto;margin-top:4.9rem}#rastreio-yampi .timeline-container .timeline-border-bottom{position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word;background-color:#fff;background-clip:border-box;border:0 solid #0046be;border-radius:.375rem}#rastreio-yampi .timeline-container .timeline-border-bottom::after{content:\"\";position:inherit;top:0;right:0;left:0;border-top-width:2px;border-bottom-width:calc(.375rem - 2px);border-top-style:solid;border-bottom-style:solid;border-top-color:inherit;border-bottom-color:transparent;border-top-left-radius:.375rem;border-top-right-radius:.375rem}#rastreio-yampi .timeline-container #timeline div:after{content:'';width:3px;position:absolute;top:-1.5rem;bottom:0;left:80px;z-index:1;background:#3966ea}#rastreio-yampi .timeline-container .icon-home{position:absolute;left:71px;z-index:999;top:-39px;color:#3966ea}#rastreio-yampi .timeline-container .icon-home::after{content:url(//cdn.jsdelivr.net/gh/lojashiper/documents/home.svg);display:inline-block;width:20px;height:20px;position:relative;filter:invert(10%) sepia(88%) saturate(6017%) hue-rotate(211deg) brightness(101%) contrast(105%)}#rastreio-yampi .timeline-container #timeline h3{position:relative;color:#888;margin:0;font-size:1em;font-weight:400}#rastreio-yampi .timeline-container #timeline section.time-line-data{position:relative}#rastreio-yampi .timeline-container #timeline section{display:block}#rastreio-yampi .timeline-container #timeline section.time-line-data:first-child section{margin-top:-1.3em}#rastreio-yampi .timeline-container #timeline section.time-line-data:last-child section{margin-bottom:2.5em}#rastreio-yampi .timeline-container #timeline section.time-line-data section{position:relative;padding-bottom:.5em}#rastreio-yampi .timeline-container #timeline .year{top:27px;left:-20px;text-align:end;font-size:13px;width:80px}#rastreio-yampi .timeline-container #timeline .timer{color:#352d2d91;font-size:14px;margin-top:-2px}#rastreio-yampi .timeline-container #timeline section.time-line-data section ul{list-style-type:none;margin:-27px 0 0;max-width:32rem;font-size:1.1em;padding:0 0 0 106px}#rastreio-yampi .timeline-container #timeline section.time-line-data section ul:first-of-type:after{content:'';width:12px;height:12px;background:#fff;border:2px solid #3967eb;-webkit-border-radius:50%;-moz-border-radius:50%;-ms-border-radius:50%;border-radius:50%;position:absolute;left:74px;top:2px;z-index:2}#rastreio-yampi .timeline-container #timeline section.time-line-data:nth-child(1) section ul:after{background:#ffe000}",shadow.appendChild(styleNode);var content_shadow=document.createElement("div");content_shadow.id="content-shadow",shadow.appendChild(content_shadow),shadow.querySelector("#content-shadow").innerHTML='<div class="input-group-raspi"> <input type="text" class="form-control-raspi code-value" placeholder="LO235569205CN"> <div class="input-group-button-raspi"> <button class="button-raspi"> <span class="button-raspi-text">Buscar</span> </button> </div> </div>';var mes_date=["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],palavras_replace={"Shipment information received":"Informa\xe7\xe3o de postagem recebida","Shipment arrived at facility and measured":"Verificando peso e medidas do item para transporte","4PX Express picked up the shipment":"Verifica\xe7\xe3o do item para transporte finalizada","Depart from facility to service provider":"Encaminhado para linha de transporte","Hand over to airline":"Verifica\xe7\xe3o de triagem finalizada","Chegue ao destino":"Chegou ao pa\xeds de destino","Chegue no escrit\xf3rio de entrega local":"Chegou ao dep\xf3sito de entrega local","Origem esquerda":"Deixou o pa\xeds de or\xedgem","Chegue ao pa\xeds ou distrito de tr\xe2nsito":"Chegou ao pa\xeds ou distrito de tr\xe2nsito","Sa\xedda no centro de triagem":"Saiu do centro de triagem","v\xe1 embora":"Objeto em tr\xe2nsito - por favor aguarde","V\xe1 embora":"Objeto em tr\xe2nsito - por favor aguarde","Partiu do aeroporto de HONG KONG":"Partiu do aeroporto do pa\xeds de origem","Scan Yanwen Pickup":"Encomenda em triagem inicial","Instala\xe7\xe3o de Yanwen - Sa\xedda":"Centro de triagem - Em prepara\xe7\xe3o para sa\xedda","Delivery unsuccessful":"Entrega n\xe3o realizada","Awaiting for you to pick-up":"Aguardando retirada do pedido nos Correios","Objeto aguardando retirada no endere\xe7o indicado":"Objeto aguardando retirada na ag\xeancia dos Correios mais pr\xf3xima de sua resid\xeancia","Liberado da alf\xe2ndega / despachado do centro de processamento (esta\xe7\xe3o de c\xe2mbio interna)":"Despachado do centro de processamento (esta\xe7\xe3o de triagem interna)","Realizado pela alf\xe2ndega":"Item em an\xe1lise pelos Correios","Envio pendente pelo vendedor":"Produto em posse da transportadora"};function pad_2digit(e){return String(e).padStart(2,"0")}function activate_loading(){shadow.querySelector("#content-shadow .button-raspi").classList.add("button-loading")}function disactivate_loading(){shadow.querySelector("#content-shadow .button-raspi").classList.remove("button-loading")}let auth_code_generated=null;async function get_auth_code(){return await (await fetch("https://api.lojashiper.com/api/token.php",{method:"get",redirect:"follow"})).json()}async function get_tracker(e){return auth_code_generated||(auth_code_generated=await get_auth_code()),await fetch("https://api.lojashiper.com/api/?track="+e+"&auth_user="+auth_code_generated.data,{method:"get",redirect:"follow"}).then(async e=>await e.json())}function create_result_traking(e,t){if(t.status){if(shadow.querySelector("#content-shadow").insertAdjacentHTML("beforeend",'<div id="rastreio-yampi"><div class="container-traking"><h1 class="title-h1-text"><span class="text-primary">Resultado</span></h1><h3 class="title-h3-text"><span class="badge-code-check">'+e+'<i class="fas fa-check"></i></span></h3><h3 class="title-h3-text"><div class="alert-message" role="alert"><span>Devido ao surto de COVID-19, todos os processos de envio nacional e internacional estar\xe3o sujeitos a atrasos.</span></div></h3><div class="timeline-container"><div class="item"><div id="timeline"><div><i class="icon-home"></i></div><br><div class="timeline-sections"></div></div></div><div class="timeline-border-bottom"></div></div></div></div>'),t.data.events.length>0)t.data.events.forEach(function(e){var t=e.attribute;if("Chegou ao destino"==t&&e.details&&(t=e.details),t=t.replace(RegExp("("+Object.keys(palavras_replace).map(function(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}).join("|")+")","g"),function(e){return palavras_replace[e]}),!/[!@#$%^&*【】_+\=\[\]{};':"\\|<>?]/.test(t)&&!t.includes("Objeto saiu")&&!t.includes("Objeto entregue")&&!t.includes("Hong Kong")&&!t.includes("China")&&!t.includes("Yanwen")&&!t.includes("Kunshan")&&!t.includes("Shenzhen")&&!t.includes("Taiwan")){var i=e.date.split(/[- :]/),a=new Date(i[0],i[1]-1,i[2],i[3],i[4],i[5]);"cainiao"==e.courier&&a.setHours(a.getHours()-12),shadow.querySelector("#content-shadow .timeline-container .timeline-sections").insertAdjacentHTML("beforeend",'<section class="time-line-data"><h3 class="year">'+a.getDate()+" de "+mes_date[a.getMonth()]+"<br> de "+a.getFullYear()+"</h3><section><ul><li>"+t+'</li><li></li><li class="timer">'+pad_2digit(a.getHours())+":"+pad_2digit(a.getMinutes())+"</li></ul></section></section>")}});else{var i=new Date;shadow.querySelector("#content-shadow .timeline-container .timeline-sections").insertAdjacentHTML("beforeend",'<section class="time-line-data"><h3 class="year">'+i.getDate()+" de "+mes_date[i.getMonth()]+"<br> de "+i.getFullYear()+'</h3><section><ul><li>Produto em posse da transportadora</li><li></li><li class="timer">'+pad_2digit(i.getHours())+":"+pad_2digit(i.getMinutes())+"</li></ul></section></section>")}}else"no_data"==t.status?shadow.querySelector("#content-shadow").insertAdjacentHTML("beforeend",'<div id="rastreio-yampi"><div class="container-traking"><h1 class="title-h1-text"><span class="text-primary">Resultado</span></h1><h3 class="title-h3-text"><span class="badge-code-check">'+e+'<i class="fas fa-check"></i></span></h3><h3 class="title-h3-text"><div class="alert-warning-message" role="alert"><strong>Ops!</strong> <span>Infelizmente houve um erro para se comunicar com a transporadora, tente novamente mais tarde.</span></div></h3><div class="timeline-container"><div class="item"><div id="timeline"><div><i class="icon-home"></i></div><br><div class="timeline-sections"></div></div></div><div class="timeline-border-bottom"></div></div></div></div>'):shadow.querySelector("#content-shadow").insertAdjacentHTML("beforeend",'<div id="rastreio-yampi"><div class="container-traking"><h1 class="title-h1-text"><span class="text-primary">Resultado</span></h1><h3 class="title-h3-text"><span class="badge-code-check">'+e+'<i class="fas fa-check"></i></span></h3><h3 class="title-h3-text"><div class="alert-warning-message" role="alert"><strong>Ops!</strong> <span>A transportadora ainda n\xe3o atualizou o status de andamento do envio, tente novamente mais tarde.</span></div></h3><div class="timeline-container"><div class="item"><div id="timeline"><div><i class="icon-home"></i></div><br><div class="timeline-sections"></div></div></div><div class="timeline-border-bottom"></div></div></div></div>')}function invalid_code(){shadow.querySelector("#content-shadow .code-value").classList.add("is-invalid"),setTimeout(function(){shadow.querySelector("#content-shadow .code-value").classList.remove("is-invalid")},1500)}async function analyse_code(e){var t=null!=e?e:shadow.querySelector("#content-shadow .code-value").value;if(""==t)invalid_code();else{activate_loading();var i=await get_tracker(t);disactivate_loading(),shadow.querySelector("#rastreio-yampi")&&shadow.querySelector("#rastreio-yampi").remove(),create_result_traking(t,i)}}function getSearchParameters(){var e=window.location.search.substr(1);return null!=e&&""!=e?transformToAssocArray(e):{}}function transformToAssocArray(e){for(var t={},i=e.split("&"),a=0;a<i.length;a++){var o=i[a].split("=");t[o[0]]=o[1]}return t}var params=getSearchParameters();params["codigo-de-rastreio"]&&"0"!=params["codigo-de-rastreio"]?(shadow.querySelector("#content-shadow .code-value").value=params["codigo-de-rastreio"],analyse_code(params["codigo-de-rastreio"])):params.codigo&&"0"!=params.codigo?(shadow.querySelector("#content-shadow .code-value").value=params.codigo,analyse_code(params.codigo)):params.id&&"0"!=params.id&&(shadow.querySelector("#content-shadow .code-value").value=params.id,analyse_code(params.id)),shadow.querySelector("#content-shadow .button-raspi").addEventListener("click",function(){analyse_code()}),shadow.querySelector("#content-shadow .code-value").addEventListener("keyup",function(e){13===e.which&&analyse_code()});
